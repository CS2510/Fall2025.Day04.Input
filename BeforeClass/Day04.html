<!doctype html>
<html>

<head>
    <title>Day 04 Game</title>
    <style>
        *{
            margin:0;
            overflow: hidden;
        }
    </style>

</head>

<body>
    <canvas id="canv"></canvas>
    <!-- Engine-specific Code -->
    <script src="./engine/Vector2.js"></script>
    <script src="./engine/Input.js"></script>
    <script src="./engine/Scene.js"></script>
    <script src="./engine/GameObject.js"></script>
    <script src="./engine/Component.js"></script>

    <!-- Game-specific Code -->
    <script src="./game/MainScene.js"></script>
    <script src="./game/TriangleGameObject.js"></script>
    <script src="./game/TriangleController.js"></script>
    <script src="./game/SquareGameObject.js"></script>
    <script src="./game/SquareController.js"></script>
    <script>

        //Engine-specific code
        const canvas = document.querySelector("#canv")
        const ctx = canvas.getContext("2d")

        const currentScene = new MainScene()

        //Engine-specific
        function start() {
            //Game-specific
            currentScene.start()
            gameLoop()
        }

        //Engine-specific code
        //Engine-specific code
        function gameLoop() {
            update()
            draw()
            requestAnimationFrame(gameLoop)
        }


        //Engine-specific
        function update() {
            currentScene.update()
        }

        //Engine-specific
        function draw() {
            canvas.width = window.innerWidth
            canvas.height = window.innerHeight
            //Game-specific
            ctx.fillStyle = "green"
            ctx.beginPath()
            ctx.rect(0, 0, canvas.width, canvas.height)
            ctx.fill()

            currentScene.draw(ctx)

        }

        //Engine-specific
        addEventListener("keydown", Input.keydown)
        addEventListener("keyup", Input.keyup)
        addEventListener("mousedown", Input.mousedown)
        addEventListener("mouseup", Input.mouseup)
        addEventListener("mousemove", Input.mousemove)
        requestAnimationFrame(start)

    </script>
</body>

</html>